+++
title = "!Полезное Arch Linux (Обслуживание/Фиксы/Советы и т.д)"
date = 2023-10-26T01:45:00+05:00
draft = false
[taxonomies]
categories = []
tags = ["linux"]
+++

## 5 Главных принципов использования Arch Linux

1. Перед установкой AUR пакета читай PKGBUILD, ради своей же безопасности
2. Команда ``yay -Pw`` довольно удобно запускать перед обновлениями, потому что, если что-то потребует ручного вмешательства, это будет опубликовано на главной странице веб-сайта arch
3. Не проверяйте обновления используя `pacman -Syu` или `yay` а потом отменять на ctrl+c, ты этим можешь всё испортить. Вместо этого юзай команду `checkupdates`
4. Не проверяйте обновления каждую минуту, делай это только спустя неделю
5. Если очень долго не обновлялись, рекомендуется запустить эту команду ``sudo pacman -Sy archlinux-keyring && sudo pacman -Su``

## Arch tar ball ISO: PGP ключи не инициализировались

Ошибка GPG ключей pacman из-за слишком быстрой синхронизации и установки пакетов

Как этого избежать:

Смотрим статус у этого сервиса

```sh
systemctl status pacman-init.service
```

Если вы видите: "**Finished Initializes Pacman keyring**" значит можно использовать синхронизацию зеркал и устанавливать пакеты.\
Если же вы не видите эту надпись значит процесс инициализации ключей pacman ещё не прошёл

## Как узнать причину удаления AUR пакета?

Весь список AUR запросов находятся по ссылке\
https://lists.archlinux.org/archives/list/aur-requests@lists.archlinux.org/

По поиску можно ввести пакет который был удалён и узнать причину

Есть также архив запросов которые добавляются (судя по всему) по завершению года\
https://lists.archlinux.org/pipermail/aur-requests/

## Как скачать удалённый администрацией AUR репозиторий?

Примером будет legacylauncher который удалили по причине EULA Minecraft'а\
https://lists.archlinux.org/archives/list/aur-requests@lists.archlinux.org/message/IU3UVJPD3EHNXQLMXKKSX727GCLMNGYL/

Так как обычно по [ссылке](https://aur.archlinux.org/packages/legacylauncher) появляется ошибка 404 есть метод который позволит найти официально исходники репо\

Обойти это можно перейдя в дерево **cgit** по текущему адресу с вводом названия пакета\
https://aur.archlinux.org/cgit/aur.git/tree/?h=legacylauncher

Тут можно увидеть исходники включая **PKGBUILD** отобразив в raw формате нажав **plain** и затем скачав его

Также можно клонировать удалённый репозиторий командой, в конце названия обязательно должен быть .git

```sh
git clone https://aur.archlinux.org/legacylauncher.git
```

И вуаля удалённое репо у вас.

## !Обновление номера версии и хэш PKGBUILD AUR пакета

- [Источник](https://www.youtube.com/watch?v=hfVGVZ9rzo4)

Описание: Как актуализировать PKGBUILD aur пакет который устарел, в данном примере будет выступать proton-ge-custom-bin

```sh
yay -S proton-ge-custom-bin
```

Затем отменяем загрузку\
Переходим в `$HOME/.cache/yay/proton-ge-custom-bin/` и открываем **PKGBUILD** вашим редактором и меняем в нём строку связанную с версией пакета

```sh
....
pkgver=GE_Proton7_41 -> pkgver=GE_Proton7_42
....
```

Затем сохраняем и оставаясь в каталоге обновляем хэш-суммы данной командой `updpkgsums`\
Команда вытянет из указанного url исходник и после подсчитает контрольные суммы и автоматически запишет их в PKGBUILD.

Теперь пробуем собрать данный пакет и установить его

```sh
makepkg -sric
```
